
# VS Code 中使用 Git 的详细教程

这是一份专门为 VS Code 设计的 Git 使用指南，结合了 VS Code 的界面操作和 Git 命令行，简单易懂。

## 准备工作

### 1. 确保 VS Code 已安装 Git 扩展
VS Code 已经内置了 Git 支持，无需额外安装扩展。如果没有，在扩展商店搜索 "Git" 并安装 Microsoft 官方的 Git 扩展。

### 2. 打开项目
- 点击 VS Code 左上角的 `文件` > `打开文件夹`
- 选择项目所在的文件夹

---

## 查看项目状态

### 方法一：使用源代码管理面板
1. 点击左侧边栏的 **源代码管理** 图标（看起来像一个分支的图标）
2. 或者使用快捷键：`Ctrl+Shift+G` (Windows/Linux) 或 `Cmd+Shift+G` (Mac)

**界面说明：**
- **更改：** 显示所有修改过的文件（红色表示未暂存，绿色表示已暂存）
- **暂存的更改：** 即将提交的文件
- **消息框：** 用于输入提交信息

### 方法二：使用状态栏
- 左下角的分支名称：显示当前所在分支（通常是 `main`）
- 分支名称旁边的数字：表示有多少个修改过的文件

---

## 修改代码后的操作流程

### 步骤 1：查看变更内容

#### 方法一：使用源代码管理面板
1. 点击源代码管理图标
2. 点击要查看的文件名
3. 在编辑器的右侧会显示比较视图（黄色表示新增，红色表示删除，绿色表示修改）

#### 方法二：使用命令面板
1. 打开命令面板：`Ctrl+Shift+P` (Windows/Linux) 或 `Cmd+Shift+P` (Mac)
2. 输入：`Git: 显示变更差异`
3. 选择要查看的文件

---

### 步骤 2：暂存修改

#### 方法一：使用界面操作
1. 点击源代码管理图标
2. 在 **更改** 部分，点击文件名右侧的 `+` 号

#### 方法二：使用右键菜单
1. 在文件资源管理器中右键点击修改过的文件
2. 选择：`将文件暂存`

#### 方法三：使用快捷键
- 暂存单个文件：`Ctrl+K Ctrl+S` (Windows/Linux) 或 `Cmd+K Cmd+S` (Mac)
- 暂存所有文件：点击 **更改** 旁边的 `+` 号

---

### 步骤 3：提交暂存区的修改

1. 在源代码管理面板的 **消息** 框中输入提交信息
2. 点击消息框下方的 `✓` 号（提交按钮）
3. 或者使用快捷键：`Ctrl+Enter` (Windows/Linux) 或 `Cmd+Enter` (Mac)

**提交信息格式建议：**
- `feat: 添加新功能`
- `fix: 修复bug`
- `refactor: 重构代码`

**示例：**
```
feat: 优化工具栏布局，减少垂直空间占用
```

---

### 步骤 4：推送到远程仓库

#### 方法一：使用界面操作
1. 点击左下角的分支名称
2. 选择：`推送到`
3. 如果是第一次推送，会提示输入 GitHub 凭据

#### 方法二：使用命令面板
1. 打开命令面板：`Ctrl+Shift+P` (Windows/Linux) 或 `Cmd+Shift+P` (Mac)
2. 输入：`Git: 推送`

#### 方法三：使用状态栏

**场景 A：有未推送的提交**
- 左下角会显示一个箭头图标
- 点击箭头，选择 `推送到 origin/main`

**场景 B：需要先拉取**
- 如果远程仓库有更新，会提示 `无法推送到 origin 因为本地分支较旧`
- 点击 **拉取** 按钮，等待拉取完成
- 解决冲突（如果有）
- 再次尝试推送

---

## 常见任务的操作

### 查看提交历史

#### 方法一：使用界面操作
1. 点击源代码管理图标
2. 点击右上角的 `...` 图标
3. 选择：`查看 Git 历史`

#### 方法二：使用命令面板
1. 打开命令面板
2. 输入：`Git: 查看历史记录`

**界面说明：**
- 左侧显示所有提交
- 右侧显示当前提交的详细信息和变更内容

---

### 查看分支信息

1. 点击左下角的分支名称
2. 会显示当前分支和其他分支信息

#### 创建新分支：
1. 点击左下角的分支名称
2. 选择：`创建新分支`
3. 输入分支名称，如 `feature/new-function`
4. 按 Enter 键确认

#### 切换分支：
1. 点击左下角的分支名称
2. 选择要切换到的分支
3. 点击：`切换到该分支`

---

### 处理代码冲突

**场景：** 当远程仓库的代码与本地修改发生冲突时

#### 步骤 1：检测冲突
- VS Code 会提示有未拉取的更新
- 点击 **拉取** 按钮
- 如果有冲突，会显示红色的 `合并冲突` 提示

#### 步骤 2：查看冲突文件
- 在文件中会显示：
  ```
  <<<<<<< HEAD
  你本地的代码
  =======
  远程的代码
  >>>>>>> origin/main
  ```

#### 步骤 3：解决冲突
1. 选择你要保留的代码（删除另一种版本）
2. 删除冲突标记（`<<<<<<<`, `=======`, `>>>>>>>`）
3. 保存文件

#### 步骤 4：完成合并
1. 点击源代码管理面板的 `✓` 号（提交合并）
2. 再次推送

---

## 使用终端进行操作

如果你喜欢使用命令行，可以使用 VS Code 内置的终端。

### 打开终端
- 点击顶部菜单的 `终端` > `新建终端`
- 或者使用快捷键：`Ctrl+`` (Windows/Linux) 或 `Cmd+`` (Mac)

### 在终端中执行 Git 命令
```bash
# 查看状态
git status

# 暂存所有文件
git add .

# 提交
git commit -m "feat: 优化功能"

# 推送到远程
git push origin main
```

---

## VS Code Git 快捷键

### 基本操作
- `Ctrl+Shift+G` - 打开源代码管理面板
- `Ctrl+K Ctrl+S` - 暂存/取消暂存当前文件
- `Ctrl+Enter` - 提交暂存区
- `Ctrl+Shift+P` - 打开命令面板

### 文件操作
- `Alt+Shift+D` - 显示变更差异
- `Alt+Shift+C` - 提交

---

## 常见问题及解决方法

### 问题 1：无法推送到远程
```
! [rejected]        main -> main (fetch first)
```

**解决方法：**
1. 点击 VS Code 底部的 `拉取` 按钮
2. 如果有冲突，解决后再次尝试

### 问题 2：忘记暂存就提交了
```bash
# 查看上一次提交
git log --oneline

# 补充提交（修改上一次提交信息）
git commit --amend -m "feat: 优化功能并添加说明"
```

### 问题 3：恢复到上一个版本
```bash
# 恢复到上一次提交的状态（谨慎使用）
git reset --hard HEAD~1
```

---

## 项目中常用的操作场景

### 场景 1：修改了一个文件
1. 点击源代码管理图标，查看变更内容
2. 点击 `+` 号暂存
3. 输入提交信息，点击 `✓` 提交
4. 点击 `推送` 到远程

### 场景 2：修改了多个文件
1. 在 **更改** 列表中点击每个文件的 `+` 号
2. 或者点击 **更改** 旁边的 `+` 号，一次性暂存所有文件
3. 输入提交信息，点击 `✓` 提交
4. 点击 `推送`

### 场景 3：添加新文件
1. 在文件资源管理器中右键点击要添加的文件
2. 选择：`将文件暂存`
3. 提交并推送

---

## 学习建议

### 1. 熟悉界面
- 花时间熟悉 VS Code 的 Git 界面
- 了解每个图标和按钮的功能

### 2. 小步提交
- 每次修改完成后立即提交
- 提交信息要清晰明确

### 3. 定期同步
- 每天开始工作前先拉取最新代码
- 完成功能后立即推送

### 4. 使用快捷键
- 记住几个常用的快捷键可以大大提高效率
- 可以在 VS Code 的快捷键设置中查看和修改

---

## 进阶功能

### 1. 使用分支管理开发

**创建分支：**
1. 点击左下角的分支名称
2. 选择：`创建新分支`
3. 输入分支名称

**合并分支：**
1. 切换到要合并到的分支（如 `main`）
2. 点击左下角的分支名称
3. 选择要合并的分支
4. 点击：`合并到当前分支`

### 2. 使用 Stash 暂存工作

**场景：** 正在做一个功能，但需要暂时切换到其他任务

1. 在源代码管理面板点击 `...` 图标
2. 选择：`暂存更改`
3. 输入暂存名称
4. 切换任务

**恢复暂存：**
1. 在源代码管理面板点击 `...` 图标
2. 选择：`应用暂存`

---

现在你已经掌握了 VS Code 中使用 Git 的基本方法，慢慢实践就会越来越熟练！
